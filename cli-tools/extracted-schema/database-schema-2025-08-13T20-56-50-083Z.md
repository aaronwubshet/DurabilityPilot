# Supabase Database Schema Documentation

**Extracted on:** 2025-08-13T20:54:33.286Z

**Database:** postgresql://***:***@db.atvnjpwmydhqbxjgczti.supabase.co:5432/postgres

## Summary

| Component | Count |
|-----------|-------|
| Tables | 17 |
| Indexes | 36 |
| Foreign Keys | 18 |
| RLS Policies | 18 |
| Functions | 1 |
| Triggers | 1 |
| Views | 0 |
| Extensions | 6 |
| Sequences | 10 |
| Grants | 206 |

---

# Database Tables

## Table: `assessment_results`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `assessment_id` | `integer` | ❌ | `-` | - |
| `profile_id` | `uuid` | ❌ | `-` | - |
| `body_area` | `text` | ❌ | `-` | - |
| `durability_score` | `double precision` | ❌ | `-` | - |
| `range_of_motion_score` | `double precision` | ❌ | `-` | - |
| `flexibility_score` | `double precision` | ❌ | `-` | - |
| `functional_strength_score` | `double precision` | ❌ | `-` | - |
| `mobility_score` | `double precision` | ❌ | `-` | - |
| `aerobic_capacity_score` | `double precision` | ❌ | `-` | - |
| `created_at` | `timestamp with time zone` | ✅ | `now()` | - |
| `updated_at` | `timestamp with time zone` | ✅ | `now()` | - |
| `id` | `integer` | ❌ | `-` | - |

## Table: `assessments`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `assessment_id` | `bigint` | ❌ | `nextval('assessments_id_seq'::regclass)` | - |
| `profile_id` | `uuid` | ❌ | `-` | - |
| `video_url` | `text` | ✅ | `-` | - |
| `created_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |

## Table: `daily_workout_movements`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `bigint` | ❌ | `nextval('daily_workout_movements_id_seq'::regclass)` | - |
| `daily_workout_id` | `bigint` | ❌ | `-` | - |
| `movement_id` | `integer` | ❌ | `-` | - |
| `sequence` | `integer` | ❌ | `-` | - |
| `status` | `text` | ✅ | `'pending'::text` | - |
| `assigned_intensity` | `jsonb` | ✅ | `-` | - |
| `recovery_impact_score` | `numeric(5,2)` | ✅ | `-` | - |
| `resilience_impact_score` | `numeric(5,2)` | ✅ | `-` | - |
| `results_impact_score` | `numeric(5,2)` | ✅ | `-` | - |

## Table: `daily_workouts`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `bigint` | ❌ | `nextval('daily_workouts_id_seq'::regclass)` | - |
| `plan_phase_id` | `bigint` | ❌ | `-` | - |
| `workout_date` | `date` | ❌ | `-` | - |
| `status` | `text` | ✅ | `'pending'::text` | - |

## Table: `equipment`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `integer` | ❌ | `nextval('equipment_id_seq'::regclass)` | - |
| `name` | `text` | ❌ | `-` | - |

## Table: `goals`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `integer` | ❌ | `nextval('goals_id_seq'::regclass)` | - |
| `name` | `text` | ❌ | `-` | - |

## Table: `injuries`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `integer` | ❌ | `nextval('injuries_id_seq'::regclass)` | - |
| `name` | `text` | ❌ | `-` | - |

## Table: `movements`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `integer` | ❌ | `nextval('movements_id_seq'::regclass)` | - |
| `name` | `text` | ❌ | `-` | - |
| `description` | `text` | ✅ | `-` | - |
| `video_url` | `text` | ✅ | `-` | - |
| `joints_impacted` | `jsonb` | ✅ | `-` | - |
| `muscles_impacted` | `jsonb` | ✅ | `-` | - |
| `super_metrics_impacted` | `jsonb` | ✅ | `-` | - |

## Table: `plan_phases`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `bigint` | ❌ | `nextval('plan_phases_id_seq'::regclass)` | - |
| `plan_id` | `bigint` | ❌ | `-` | - |
| `phase_number` | `integer` | ❌ | `-` | - |
| `recovery_weight` | `numeric(3,2)` | ❌ | `-` | - |
| `resilience_weight` | `numeric(3,2)` | ❌ | `-` | - |
| `results_weight` | `numeric(3,2)` | ❌ | `-` | - |
| `start_date` | `date` | ❌ | `-` | - |
| `end_date` | `date` | ❌ | `-` | - |

## Table: `plans`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `bigint` | ❌ | `nextval('plans_id_seq'::regclass)` | - |
| `profile_id` | `uuid` | ❌ | `-` | - |
| `start_date` | `date` | ❌ | `-` | - |
| `end_date` | `date` | ❌ | `-` | - |
| `created_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |

## Table: `profile_equipment`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `profile_id` | `uuid` | ❌ | `-` | - |
| `equipment_id` | `integer` | ❌ | `-` | - |
| `reported_at` | `timestamp with time zone` | ✅ | `now()` | - |

## Table: `profile_goals`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `profile_id` | `uuid` | ❌ | `-` | - |
| `goal_id` | `integer` | ❌ | `-` | - |
| `reported_at` | `timestamp with time zone` | ✅ | `now()` | - |

## Table: `profile_injuries`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `profile_id` | `uuid` | ❌ | `-` | - |
| `injury_id` | `integer` | ❌ | `-` | - |
| `other_injury_text` | `text` | ✅ | `-` | - |
| `is_active` | `boolean` | ✅ | `true` | - |
| `reported_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |

## Table: `profile_movement_blacklist`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `profile_id` | `uuid` | ❌ | `-` | - |
| `movement_id` | `integer` | ❌ | `-` | - |
| `created_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |

## Table: `profile_sports`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `profile_id` | `uuid` | ❌ | `-` | - |
| `sport_id` | `integer` | ❌ | `-` | - |
| `reported_at` | `timestamp with time zone` | ✅ | `now()` | - |

## Table: `profiles`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `uuid` | ❌ | `-` | - |
| `first_name` | `text` | ✅ | `-` | - |
| `last_name` | `text` | ✅ | `-` | - |
| `age` | `integer` | ✅ | `-` | - |
| `sex` | `text` | ✅ | `-` | - |
| `height_cm` | `numeric` | ✅ | `-` | - |
| `weight_kg` | `numeric` | ✅ | `-` | - |
| `is_pilot` | `boolean` | ✅ | `false` | - |
| `training_plan_info` | `text` | ✅ | `-` | - |
| `training_plan_image_url` | `text` | ✅ | `-` | - |
| `created_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |
| `updated_at` | `timestamp with time zone` | ❌ | `timezone('utc'::text, now())` | - |
| `assessment_completed` | `boolean` | ✅ | `false` | - |
| `onboarding_completed` | `boolean` | ✅ | `false` | - |
| `date_of_birth` | `date` | ✅ | `-` | - |

## Table: `sports`

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| `id` | `integer` | ❌ | `nextval('sports_id_seq'::regclass)` | - |
| `name` | `text` | ❌ | `-` | - |

# Foreign Key Relationships

| Table | Column | References | On Update | On Delete |
|-------|--------|------------|-----------|-----------|
| `assessment_results` | `assessment_id` | `assessments.assessment_id` | `NO ACTION` | `CASCADE` |
| `assessment_results` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `assessments` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `daily_workout_movements` | `daily_workout_id` | `daily_workouts.id` | `NO ACTION` | `CASCADE` |
| `daily_workout_movements` | `movement_id` | `movements.id` | `NO ACTION` | `CASCADE` |
| `daily_workouts` | `plan_phase_id` | `plan_phases.id` | `NO ACTION` | `CASCADE` |
| `plan_phases` | `plan_id` | `plans.id` | `NO ACTION` | `CASCADE` |
| `plans` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_equipment` | `equipment_id` | `equipment.id` | `NO ACTION` | `CASCADE` |
| `profile_equipment` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_goals` | `goal_id` | `goals.id` | `NO ACTION` | `CASCADE` |
| `profile_goals` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_injuries` | `injury_id` | `injuries.id` | `NO ACTION` | `CASCADE` |
| `profile_injuries` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_movement_blacklist` | `movement_id` | `movements.id` | `NO ACTION` | `CASCADE` |
| `profile_movement_blacklist` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_sports` | `profile_id` | `profiles.id` | `NO ACTION` | `CASCADE` |
| `profile_sports` | `sport_id` | `sports.id` | `NO ACTION` | `CASCADE` |

# Database Indexes

## Table: `assessment_results`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `assessment_results_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX assessment_results_pkey ON public.assessment_results USING btree (id)` |
| `assessment_results_unique_composite` | `assessment_id` | UNIQUE | `CREATE UNIQUE INDEX assessment_results_unique_composite ON public.assessment_results USING btree (assessment_id, profile_id, body_area)` |
| `assessment_results_unique_composite` | `profile_id` | UNIQUE | `CREATE UNIQUE INDEX assessment_results_unique_composite ON public.assessment_results USING btree (assessment_id, profile_id, body_area)` |
| `assessment_results_unique_composite` | `body_area` | UNIQUE | `CREATE UNIQUE INDEX assessment_results_unique_composite ON public.assessment_results USING btree (assessment_id, profile_id, body_area)` |
| `idx_assessment_results_assessment_id` | `assessment_id` | INDEX | `CREATE INDEX idx_assessment_results_assessment_id ON public.assessment_results USING btree (assessment_id)` |
| `idx_assessment_results_body_area` | `body_area` | INDEX | `CREATE INDEX idx_assessment_results_body_area ON public.assessment_results USING btree (body_area)` |
| `idx_assessment_results_created_at` | `created_at` | INDEX | `CREATE INDEX idx_assessment_results_created_at ON public.assessment_results USING btree (created_at)` |
| `idx_assessment_results_profile_id` | `profile_id` | INDEX | `CREATE INDEX idx_assessment_results_profile_id ON public.assessment_results USING btree (profile_id)` |

## Table: `assessments`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `assessments_pkey` | `assessment_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX assessments_pkey ON public.assessments USING btree (assessment_id)` |

## Table: `daily_workout_movements`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `daily_workout_movements_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX daily_workout_movements_pkey ON public.daily_workout_movements USING btree (id)` |

## Table: `daily_workouts`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `daily_workouts_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX daily_workouts_pkey ON public.daily_workouts USING btree (id)` |
| `daily_workouts_plan_phase_id_workout_date_key` | `plan_phase_id` | UNIQUE | `CREATE UNIQUE INDEX daily_workouts_plan_phase_id_workout_date_key ON public.daily_workouts USING btree (plan_phase_id, workout_date)` |
| `daily_workouts_plan_phase_id_workout_date_key` | `workout_date` | UNIQUE | `CREATE UNIQUE INDEX daily_workouts_plan_phase_id_workout_date_key ON public.daily_workouts USING btree (plan_phase_id, workout_date)` |

## Table: `equipment`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `equipment_name_key` | `name` | UNIQUE | `CREATE UNIQUE INDEX equipment_name_key ON public.equipment USING btree (name)` |
| `equipment_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX equipment_pkey ON public.equipment USING btree (id)` |

## Table: `goals`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `goals_name_key` | `name` | UNIQUE | `CREATE UNIQUE INDEX goals_name_key ON public.goals USING btree (name)` |
| `goals_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX goals_pkey ON public.goals USING btree (id)` |

## Table: `injuries`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `injuries_name_key` | `name` | UNIQUE | `CREATE UNIQUE INDEX injuries_name_key ON public.injuries USING btree (name)` |
| `injuries_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX injuries_pkey ON public.injuries USING btree (id)` |

## Table: `movements`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `movements_name_key` | `name` | UNIQUE | `CREATE UNIQUE INDEX movements_name_key ON public.movements USING btree (name)` |
| `movements_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX movements_pkey ON public.movements USING btree (id)` |

## Table: `plan_phases`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `plan_phases_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX plan_phases_pkey ON public.plan_phases USING btree (id)` |

## Table: `plans`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `plans_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX plans_pkey ON public.plans USING btree (id)` |

## Table: `profile_equipment`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profile_equipment_pkey` | `profile_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_equipment_pkey ON public.profile_equipment USING btree (profile_id, equipment_id)` |
| `profile_equipment_pkey` | `equipment_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_equipment_pkey ON public.profile_equipment USING btree (profile_id, equipment_id)` |

## Table: `profile_goals`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profile_goals_pkey` | `profile_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_goals_pkey ON public.profile_goals USING btree (profile_id, goal_id)` |
| `profile_goals_pkey` | `goal_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_goals_pkey ON public.profile_goals USING btree (profile_id, goal_id)` |

## Table: `profile_injuries`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profile_injuries_pkey` | `profile_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_injuries_pkey ON public.profile_injuries USING btree (injury_id, profile_id)` |
| `profile_injuries_pkey` | `injury_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_injuries_pkey ON public.profile_injuries USING btree (injury_id, profile_id)` |

## Table: `profile_movement_blacklist`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profile_movement_blacklist_pkey` | `profile_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_movement_blacklist_pkey ON public.profile_movement_blacklist USING btree (profile_id, movement_id)` |
| `profile_movement_blacklist_pkey` | `movement_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_movement_blacklist_pkey ON public.profile_movement_blacklist USING btree (profile_id, movement_id)` |

## Table: `profile_sports`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profile_sports_pkey` | `profile_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_sports_pkey ON public.profile_sports USING btree (profile_id, sport_id)` |
| `profile_sports_pkey` | `sport_id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profile_sports_pkey ON public.profile_sports USING btree (profile_id, sport_id)` |

## Table: `profiles`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `profiles_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX profiles_pkey ON public.profiles USING btree (id)` |

## Table: `sports`

| Index Name | Column | Type | Definition |
|------------|--------|------|------------|
| `sports_name_key` | `name` | UNIQUE | `CREATE UNIQUE INDEX sports_name_key ON public.sports USING btree (name)` |
| `sports_pkey` | `id` | PRIMARY KEY, UNIQUE | `CREATE UNIQUE INDEX sports_pkey ON public.sports USING btree (id)` |

# Row Level Security (RLS) Policies

## Table: `assessment_results`

### Policy: `assessment_results_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((profile_id)::text = (auth.uid())::text)`
- **With Check Expression:** `((profile_id)::text = (auth.uid())::text)`

### Policy: `assessment_results_service_role_access`

- **Roles:** service_role
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`
- **With Check Expression:** `true`

## Table: `assessments`

### Policy: `assessments_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((profile_id)::text = (auth.uid())::text)`
- **With Check Expression:** `((profile_id)::text = (auth.uid())::text)`

## Table: `daily_workout_movements`

### Policy: `daily_workout_movements_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `(EXISTS ( SELECT 1
   FROM ((daily_workouts dw
     JOIN plan_phases pp ON ((pp.id = dw.plan_phase_id)))
     JOIN plans p ON ((p.id = pp.plan_id)))
  WHERE ((dw.id = daily_workout_movements.daily_workout_id) AND (p.profile_id = auth.uid()))))`

## Table: `daily_workouts`

### Policy: `daily_workouts_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `(EXISTS ( SELECT 1
   FROM (plan_phases pp
     JOIN plans p ON ((p.id = pp.plan_id)))
  WHERE ((pp.id = daily_workouts.plan_phase_id) AND (p.profile_id = auth.uid()))))`

## Table: `equipment`

### Policy: `equipment_read_access`

- **Roles:** authenticated
- **Commands:** SELECT
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`

## Table: `goals`

### Policy: `goals_read_access`

- **Roles:** authenticated
- **Commands:** SELECT
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`

## Table: `injuries`

### Policy: `injuries_read_access`

- **Roles:** authenticated
- **Commands:** SELECT
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`

## Table: `movements`

### Policy: `movements_read_access`

- **Roles:** authenticated
- **Commands:** SELECT
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`

## Table: `plan_phases`

### Policy: `plan_phases_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `(EXISTS ( SELECT 1
   FROM plans p
  WHERE ((p.id = plan_phases.plan_id) AND (p.profile_id = auth.uid()))))`

## Table: `plans`

### Policy: `plans_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profile_equipment`

### Policy: `profile_equipment_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profile_goals`

### Policy: `profile_goals_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profile_injuries`

### Policy: `profile_injuries_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profile_movement_blacklist`

### Policy: `profile_movement_blacklist_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profile_sports`

### Policy: `profile_sports_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (profile_id)::text)`

## Table: `profiles`

### Policy: `profiles_authenticated_access`

- **Roles:** authenticated
- **Commands:** ALL
- **Permissive:** PERMISSIVE
- **Using Expression:** `((auth.uid())::text = (id)::text)`

## Table: `sports`

### Policy: `sports_read_access`

- **Roles:** authenticated
- **Commands:** SELECT
- **Permissive:** PERMISSIVE
- **Using Expression:** `true`

# Database Functions

## Function: `update_updated_at_column`

- **Schema:** `public`
- **Arguments:** ``
- **Return Type:** `trigger`

**Definition:**
```sql
CREATE OR REPLACE FUNCTION public.update_updated_at_column()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$function$

```

# Database Triggers

## Trigger: `update_assessment_results_updated_at`

- **Table:** `assessment_results`
- **Function:** `update_updated_at_column`
- **Enabled:** Yes
- **Type:** `19`

**Definition:**
```sql
CREATE TRIGGER update_assessment_results_updated_at BEFORE UPDATE ON public.assessment_results FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

# Database Views

*No views found*

# PostgreSQL Extensions

| Extension | Version |
|-----------|---------|
| `pg_graphql` | `1.5.11` |
| `pg_stat_statements` | `1.11` |
| `pgcrypto` | `1.3` |
| `plpgsql` | `1.0` |
| `supabase_vault` | `0.3.1` |
| `uuid-ossp` | `1.1` |

# Database Sequences

| Sequence | Data Type | Start | Min | Max | Increment | Cycle |
|----------|-----------|-------|-----|-----|-----------|-------|
| `assessments_id_seq` | `bigint` | `1` | `1` | `9223372036854775807` | `1` | No |
| `daily_workout_movements_id_seq` | `bigint` | `1` | `1` | `9223372036854775807` | `1` | No |
| `daily_workouts_id_seq` | `bigint` | `1` | `1` | `9223372036854775807` | `1` | No |
| `equipment_id_seq` | `integer` | `1` | `1` | `2147483647` | `1` | No |
| `goals_id_seq` | `integer` | `1` | `1` | `2147483647` | `1` | No |
| `injuries_id_seq` | `integer` | `1` | `1` | `2147483647` | `1` | No |
| `movements_id_seq` | `integer` | `1` | `1` | `2147483647` | `1` | No |
| `plan_phases_id_seq` | `bigint` | `1` | `1` | `9223372036854775807` | `1` | No |
| `plans_id_seq` | `bigint` | `1` | `1` | `9223372036854775807` | `1` | No |
| `sports_id_seq` | `integer` | `1` | `1` | `2147483647` | `1` | No |

# Database Grants

## Table: `assessment_results`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `anon` | `DELETE` | No |
| `anon` | `INSERT` | No |
| `anon` | `REFERENCES` | No |
| `anon` | `SELECT` | No |
| `anon` | `TRIGGER` | No |
| `anon` | `TRUNCATE` | No |
| `anon` | `UPDATE` | No |
| `authenticated` | `DELETE` | No |
| `authenticated` | `INSERT` | No |
| `authenticated` | `REFERENCES` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `TRIGGER` | No |
| `authenticated` | `TRUNCATE` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |
| `service_role` | `DELETE` | No |
| `service_role` | `INSERT` | No |
| `service_role` | `REFERENCES` | No |
| `service_role` | `SELECT` | No |
| `service_role` | `TRIGGER` | No |
| `service_role` | `TRUNCATE` | No |
| `service_role` | `UPDATE` | No |

## Table: `assessments`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `anon` | `DELETE` | No |
| `anon` | `INSERT` | No |
| `anon` | `REFERENCES` | No |
| `anon` | `SELECT` | No |
| `anon` | `TRIGGER` | No |
| `anon` | `TRUNCATE` | No |
| `anon` | `UPDATE` | No |
| `authenticated` | `DELETE` | No |
| `authenticated` | `INSERT` | No |
| `authenticated` | `REFERENCES` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `TRIGGER` | No |
| `authenticated` | `TRUNCATE` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |
| `service_role` | `DELETE` | No |
| `service_role` | `INSERT` | No |
| `service_role` | `REFERENCES` | No |
| `service_role` | `SELECT` | No |
| `service_role` | `TRIGGER` | No |
| `service_role` | `TRUNCATE` | No |
| `service_role` | `UPDATE` | No |

## Table: `daily_workout_movements`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `daily_workouts`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `equipment`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `goals`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `injuries`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `movements`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `plan_phases`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `plans`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profile_equipment`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profile_goals`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profile_injuries`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profile_movement_blacklist`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profile_sports`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `profiles`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

## Table: `sports`

| Grantee | Privilege | Grantable |
|---------|-----------|-----------|
| `authenticated` | `INSERT` | No |
| `authenticated` | `SELECT` | No |
| `authenticated` | `UPDATE` | No |
| `postgres` | `DELETE` | Yes |
| `postgres` | `INSERT` | Yes |
| `postgres` | `REFERENCES` | Yes |
| `postgres` | `SELECT` | Yes |
| `postgres` | `TRIGGER` | Yes |
| `postgres` | `TRUNCATE` | Yes |
| `postgres` | `UPDATE` | Yes |

